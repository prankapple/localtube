<!DOCTYPE html>
<html>
<head>
  <title><%= video.title %> | LocalTube</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <%- include('partials/header') %>
  <div class="container">
    <h1><%= video.title %></h1>
    <p>Uploaded by <strong><%= video.username %></strong></p>
    <video width="100%" height="450" controls>
      <source src="/video/<%= video.filename %>" type="video/mp4">
    </video>

    <form action="/like/<%= video.id %>" method="POST" class="mt-2 mb-3">
      <button type="submit" class="btn btn-primary">ğŸ‘ Like</button>
      <span><%= likes %> likes</span>
    </form>

    <h3>Comments</h3>
    <% comments.forEach(c => { %>
      <p><strong><%= c.username %>:</strong> <%= c.text %></p>
    <% }) %>

    <% if(user){ %>
      <form action="/comment/<%= video.id %>" method="POST">
        <input type="text" name="comment" class="form-control mb-2" placeholder="Add a comment" required>
        <button type="submit" class="btn btn-success">Comment</button>
      </form>
    <% } else { %>
      <p><a href="/login">Login</a> to comment</p>
    <% } %>
  </div>
  <%- include('partials/footer') %>
</body>
</html>
